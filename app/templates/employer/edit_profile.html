{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h3>Chỉnh sửa hồ sơ công ty</h3>
  <form method="POST" enctype="multipart/form-data">
    {{ form.hidden_tag() }}



    <!-- Điện thoại và Website -->
    <div class="row">
      <div class="col-md-6 mb-3">
        {{ form.phone.label(class="form-label") }}
        {{ form.phone(class="form-control") }}
      </div>
      <div class="col-md-6 mb-3">
        {{ form.website.label(class="form-label") }}
        {{ form.website(class="form-control") }}
      </div>
    </div>

    <!-- Ngành nghề -->
    <div class="mb-3">
      {{ form.industry.label(class="form-label") }}
      {{ form.industry(class="form-control") }}
    </div>

    <!-- Quy mô, năm thành lập, mã số thuế -->
    <div class="row">
      <div class="col-md-4 mb-3">
        {{ form.company_size.label(class="form-label") }}
        {{ form.company_size(class="form-control") }}
      </div>
      <div class="col-md-4 mb-3">
        {{ form.founded_year.label(class="form-label") }}
        {{ form.founded_year(class="form-control") }}
      </div>
      <div class="col-md-4 mb-3">
        {{ form.tax_code.label(class="form-label") }}
        {{ form.tax_code(class="form-control") }}
      </div>
    </div>

    <!-- Địa chỉ -->
    <div class="mb-3">
      {{ form.address.label(class="form-label") }}
      {{ form.address(class="form-control") }}
    </div>

    <!-- Thành phố -->
    <div class="mb-3">
      {{ form.city.label(class="form-label") }}
      {{ form.city(class="form-control") }}
    </div>

    <!-- Mô tả công ty -->
    <div class="mb-3">
      {{ form.description.label(class="form-label") }}
      {{ form.description(class="form-control", rows=5) }}
    </div>

    <!-- Logo công ty -->
    <div class="mb-3">
      {{ form.logo.label(class="form-label") }}
      {{ form.logo(class="form-control") }}

      <div class="mt-2">
        <img class="logo-preview" src="{{ employer.logo or '' }}" alt="Logo preview" width="120"
             {% if not employer.logo %}style="display:none"{% endif %}>
      </div>
    </div>

    <!-- Nút lưu / hủy -->
    <button class="btn btn-success">{{ form.submit.label.text }}</button>
    <a href="{{ url_for('employer.profile') }}" class="btn btn-secondary">Hủy</a>
  </form>
</div>

<!-- Preview logo khi chọn file mới -->
<script>
const logoInput = document.querySelector('input[name="logo"]');
const logoPreview = document.querySelector('.logo-preview');

logoInput.addEventListener('change', function() {
    const [file] = this.files;
    if(file){
        logoPreview.src = URL.createObjectURL(file);
        logoPreview.style.display = "block";
    }
});
</script>
{% endblock %}
