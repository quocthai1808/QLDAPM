{% extends "layout.html" %}
{% block title %}Trang Ch·ªß - JobNest{% endblock %}

{% block content %}
<section class="hero">
  <div class="container hero-inner">
    <div class="upper-hero">
      <h1>T√¨m vi·ªác ph√π h·ª£p - Nhanh ch√≥ng & Uy t√≠n</h1>
      <p>T√¨m ki·∫øm theo v·ªã tr√≠, m·ª©c l∆∞∆°ng v√† ƒë·ªãa ƒëi·ªÉm. H√†ng ng√†n c∆° h·ªôi t·ª´ nh√† tuy·ªÉn d·ª•ng uy t√≠n.</p>

      <form id="main-search" class="search-bar" action="{{ url_for('index') }}" method="get" role="search">
        <input type="text" name="keyword" placeholder="V·ªã tr√≠, k·ªπ nƒÉng ho·∫∑c c√¥ng ty" value="{{ search.keyword }}">
        <!-- location select custom -->
        <div class="location-select">
          <input type="text" id="location-input" name="location" placeholder="Nh·∫≠p T·ªânh/Th√†nh ph·ªë" readonly value="{{ search.location }}">
          <div class="location-dropdown" id="location-dropdown">
            <div class="location-left">
              <ul id="province-list"></ul>
            </div>
            <div class="location-right">
              <p class="placeholder">Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë</p>
              <ul id="district-list"></ul>
            </div>
          </div>
        </div>


        <input type="text" name="min_salary" id="min_salary" placeholder="M·ª©c l∆∞∆°ng t·ª´ (VND)" value="{{ search.min_salary }}">
        <input type="text" name="max_salary" id="max_salary" placeholder="ƒê·∫øn (VND)" value="{{ search.max_salary }}">

        <select name="job_type">
          <option value="">Lo·∫°i c√¥ng vi·ªác</option>
          <option value="Full-time" {% if search.job_type =='Full-time' %}selected{% endif %}>Full-time</option>
          <option value="Part-time" {% if search.job_type =='Part-time' %}selected{% endif %}>Part-time</option>
          <option value="Contract" {% if search.job_type =='Contract' %}selected{% endif %}>Contract</option>
          <option value="Intern" {% if search.job_type =='Intern' %}selected{% endif %}>Intern</option>
        </select>

        <select name="sort_by">
          <option value="">S·∫Øp x·∫øp</option>
          <option value="newest" {% if search.sort_by =='newest' %}selected{% endif %}>M·ªõi nh·∫•t</option>
          <option value="salary_desc" {% if search.sort_by =='salary_desc' %}selected{% endif %}>L∆∞∆°ng cao nh·∫•t</option>
          <option value="salary_asc" {% if search.sort_by =='salary_asc' %}selected{% endif %}>L∆∞∆°ng th·∫•p nh·∫•t</option>
        </select>

        <button type="submit" class="btn search-btn">
          <i class="fa-sharp fa-solid fa-magnifying-glass"></i>
          T√¨m ki·∫øm
        </button>
      </form>
    </div>
  </div>
</section>

<section class="jobs container">
  <div class="jobs-grid">
    <aside class="filters">
      <div class="filter-card">
        <h4>B·ªô l·ªçc nhanh</h4>
        <label>Lo·∫°i c√¥ng vi·ªác</label>
        <select onchange="document.getElementById('main-search').job_type.value=this.value">
          <option value="">T·∫•t c·∫£</option>
          <option value="Full-time">Full-time</option>
          <option value="Part-time">Part-time</option>
          <option value="Contract">Contract</option>
        </select>

        <label style="margin-top:12px">M·ª©c l∆∞∆°ng</label>
        <input type="text" id="flt_min" placeholder="T·ª´ (VND)" oninput="document.getElementById('main-search').min_salary.value=this.value">
        <input type="text" id="flt_max" placeholder="ƒê·∫øn (VND)" oninput="document.getElementById('main-search').max_salary.value=this.value">

        <button class="btn primary" onclick="document.getElementById('main-search').submit()">√Åp d·ª•ng</button>
      </div>
    </aside>

    <div class="job-list">
      <h2>C√¥ng vi·ªác n·ªïi b·∫≠t</h2>
      <div class="job-grid">
        {% for job in hot_jobs %}
        <article class="job-card featured">
          <div class="logo">üè¢</div>
          <div class="job-info">
            <h3>{{ job.title }}</h3>
            <p class="muted">{{ job.company }} - {{ job.location }}</p>
            <p class="salary">{{ job.salary | fmt_salary }} VND ¬∑ {{ job.job_type or '-' }}</p>
          </div>
          <div class="job-cta">
            <a class="btn ghost" href="#">Xem chi ti·∫øt</a>
          </div>
        </article>
        {% else %}
          <p>Kh√¥ng c√≥ c√¥ng vi·ªác n·ªïi b·∫≠t ph√π h·ª£p.</p>
        {% endfor %}
      </div>

      <h3 style="margin-top:24px">C√°c c√¥ng vi·ªác kh√°c</h3>
      <div class="job-grid">
        {% for job in other_jobs %}
        <article class="job-card">
          <div class="logo">üè¢</div>
          <div class="job-info">
            <h4>{{ job.title }}</h4>
            <p class="muted">{{ job.company }} - {{ job.location }}</p>
            <p class="salary">{{ job.salary | fmt_salary }} VND ¬∑ {{ job.job_type or '-' }}</p>
          </div>
          <div class="job-cta">
            <a class="btn ghost" href="#">Xem chi ti·∫øt</a>
          </div>
        </article>
        {% else %}
          <p>Kh√¥ng c√≥ c√¥ng vi·ªác n√†o.</p>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
{% endblock %}


