{% extends "layout.html" %}
{% block title %}Trang Ch·ªß - JobNest{% endblock %}

{% block content %}
<!-- HERO -->
<section class="bg-light py-5">
  <div class="container text-center">
    <h1 class="mb-3">T√¨m vi·ªác ph√π h·ª£p - Nhanh ch√≥ng & Uy t√≠n</h1>
    <p class="text-muted">T√¨m ki·∫øm theo v·ªã tr√≠, m·ª©c l∆∞∆°ng v√† ƒë·ªãa ƒëi·ªÉm. H√†ng ng√†n c∆° h·ªôi t·ª´ nh√† tuy·ªÉn d·ª•ng uy t√≠n.</p>

    <!-- Search Form -->
    <form class="row g-2 justify-content-center mt-4" action="{{ url_for('index') }}" method="get">
      <div class="col-md-4">
        <input type="text" name="keyword" class="form-control" placeholder="V·ªã tr√≠, k·ªπ nƒÉng ho·∫∑c c√¥ng ty"
               value="{{ search.keyword }}">
      </div>
      <div class="col-md-2">
        <input type="text" name="location" class="form-control" placeholder="ƒê·ªãa ƒëi·ªÉm" value="{{ search.location }}">
      </div>
      <div class="col-md-2">
        <select name="job_type" class="form-select">
          <option value="">Lo·∫°i c√¥ng vi·ªác</option>
          <option value="Full-time" {% if search.job_type == 'Full-time' %}selected{% endif %}>Full-time</option>
          <option value="Part-time" {% if search.job_type == 'Part-time' %}selected{% endif %}>Part-time</option>
          <option value="Remote" {% if search.job_type == 'Remote' %}selected{% endif %}>Remote</option>
          <option value="Contract" {% if search.job_type == 'Contract' %}selected{% endif %}>Contract</option>
          <option value="Intern" {% if search.job_type == 'Intern' %}selected{% endif %}>Intern</option>
        </select>
      </div>
      <div class="col-md-2">
        <select name="sort_by" class="form-select">
          <option value="">S·∫Øp x·∫øp</option>
          <option value="newest" {% if search.sort_by == 'newest' %}selected{% endif %}>M·ªõi nh·∫•t</option>
          <option value="salary_desc" {% if search.sort_by == 'salary_desc' %}selected{% endif %}>L∆∞∆°ng cao nh·∫•t</option>
          <option value="salary_asc" {% if search.sort_by == 'salary_asc' %}selected{% endif %}>L∆∞∆°ng th·∫•p nh·∫•t</option>
        </select>
      </div>
      <div class="col-md-2 d-grid">
        <button type="submit" class="btn btn-primary">
          <i class="fa-solid fa-magnifying-glass me-1"></i> T√¨m ki·∫øm
        </button>
      </div>
    </form>
  </div>
</section>

<!-- JOB LIST -->
<section class="container my-5">
  <h2>C√¥ng vi·ªác n·ªïi b·∫≠t</h2>
<div class="job-grid">
  {% for job in hot_jobs %}
    <article class="job-card featured" aria-labelledby="title-{{ job.id }}">
      <div class="logo">üè¢</div>
      <div class="job-info">
        <h3>
          <a href="{{ url_for('job_detail', id=job.id) }}" id="title-{{ job.id }}">
            {{ job.title }}
          </a>
        </h3>
        <p class="muted">{{ job.company }} ¬∑ {{ job.location }}</p>
        <p class="salary">{{ job.salary | fmt_salary }} ¬∑ {{ job.job_type or '-' }}</p>

        <div class="d-flex gap-2 mt-2">
          <a href="{{ url_for('save_job', job_id=job.id) }}"
             class="btn btn-sm btn-outline-primary">L∆∞u Tin</a>
          <a href="{{ url_for('apply_job', job_id=job.id) }}"
             class="btn btn-sm btn-success">·ª®ng Tuy·ªÉn Ngay</a>
        </div>
      </div>
    </article>
  {% else %}
    <p>Kh√¥ng c√≥ c√¥ng vi·ªác n·ªïi b·∫≠t ph√π h·ª£p.</p>
  {% endfor %}
</div>


  <!-- Other Jobs -->
  <h3 class="mt-5">C√°c c√¥ng vi·ªác kh√°c</h3>
  <div class="row g-3">
    {% for job in other_jobs %}
    <div class="col-md-3">
      <div class="card h-100">
        <div class="card-body">
          <h6 class="card-title">{{ job.title }}</h6>
          <p class="text-muted small">{{ job.company }} ¬∑ {{ job.location }}</p>
          <p class="small">{{ job.salary | fmt_salary }} ¬∑ {{ job.job_type or '-' }}</p>
          <a href="{{ url_for('job_detail', id=job.id) }}" class="stretched-link">Xem chi ti·∫øt</a>
        </div>
      </div>
    </div>
    {% else %}
      <p>Kh√¥ng c√≥ c√¥ng vi·ªác n√†o.</p>
    {% endfor %}
  </div>

  <!-- Pagination -->
  {% if total_pages > 1 %}
  <nav class="mt-4" aria-label="Pagination">
    <ul class="pagination justify-content-center">
      {% if page > 1 %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('index', page=page-1, **search) }}">Tr∆∞·ªõc</a>
      </li>
      {% endif %}
      {% for p in range(1, total_pages + 1) %}
      <li class="page-item {% if p == page %}active{% endif %}">
        <a class="page-link" href="{{ url_for('index', page=p, **search) }}">{{ p }}</a>
      </li>
      {% endfor %}
      {% if page < total_pages %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('index', page=page+1, **search) }}">Sau</a>
      </li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}
</section>
{% endblock %}
